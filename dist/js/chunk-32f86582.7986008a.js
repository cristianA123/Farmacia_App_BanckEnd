(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32f86582","chunk-2d0e1d63"],{"7bac":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex flex-column flex-grow-1"},[e("v-navigation-drawer",{attrs:{fixed:"",right:"","hide-overlay":"",temporary:"",width:"310"},model:{value:t.config,callback:function(a){t.config=a},expression:"config"}},[e("div",{staticClass:"d-flex align-center pa-2"},[e("div",{staticClass:"title"},[t._v("Configuraciones")]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){t.config=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-divider"),e("div",{staticClass:"pa-2"},[e("div",{staticClass:"font-weight-bold my-1"},[t._v("Duplicados")]),e("span",[t._v("Permite agregar contactos duplicados")]),e("br"),e("br"),e("v-switch",{attrs:{inset:"",label:"Aceptar contactos duplicados"},model:{value:t.duplicateAcept,callback:function(a){t.duplicateAcept=a},expression:"duplicateAcept"}})],1),e("div",{staticClass:"pa-2"},[e("div",{staticClass:"font-weight-bold my-1"},[t._v("Depurar base")]),e("span",[t._v("Elimina todos los números Incorrecto de esta Base de contactos")]),e("br"),e("br"),e("v-col",{staticClass:"pa-0 ma-0"},[e("v-btn",{staticClass:"col-lg-12",attrs:{mandatory:""}},[t._v(" Limpiar ")])],1)],1)],1),e("Move-Agenda",{ref:"moveAgenda",on:{onMoveAgenda:t.onMoveAgenda}}),e("v-card",[e("v-data-table",{attrs:{headers:t.headers,"show-select":"",loading:t.isLoading,items:t.contacts,"items-per-page":10,search:t.searchTable,"hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[e("v-col",{staticClass:"pb-1"},[e("v-row",[e("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[e("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.selectedUsers.length>0,expression:"selectedUsers.length > 0"}],staticClass:"ml-3"},n),[t._v(" Acciones "),e("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)],1)]}}])},[e("v-list",{attrs:{dense:""}},[e("v-list-item",{on:{click:t.deleteItems}},[e("v-list-item-title",[t._v("Eliminar seleccionados")])],1),e("v-list-item",{on:{click:t.moveItems}},[e("v-list-item-title",[t._v("Mover a otra agenda")])],1)],1)],1),e("v-spacer"),e("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[e("v-btn",t._g({staticClass:"mr-3",attrs:{color:"primary"}},n),[e("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Nuevos contactos ")],1)]}}])},[e("v-list",{attrs:{dense:"",nav:""}},[e("v-list-item",{on:{click:function(a){return t.openNewContact()}}},[e("v-list-item-content",[e("v-list-item-title",[t._v("Individual")])],1)],1),e("v-list-item",{on:{click:function(a){return t.openNewContactsFromExcel()}}},[e("v-list-item-content",[e("v-list-item-title",[t._v("Desde Excel")])],1)],1)],1)],1)],1)],1),e("v-col",{staticClass:"pt-1"},[e("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:10000",value:t.getContacts,expression:"getContacts",arg:"10000"}],attrs:{solo:"",label:"Buscar contacto",outlined:""},model:{value:t.searchTable,callback:function(a){t.searchTable=a},expression:"searchTable"}})],1)]},proxy:!0},{key:"item.id",fn:function(a){var n=a.item;return[e("div",{staticClass:"font-weight-bold"},[t._v("# "),e("copy-label",{attrs:{text:n.id+""}})],1)]}},{key:"item.name1",fn:function(a){var n=a.item;return[e("v-avatar",{attrs:{size:"40"}},[e("v-icon",[t._v(" mdi-account-circle ")])],1),t._v(" "+t._s(n.name1)+" ")]}},{key:"item.is_valid",fn:function(a){var n=a.item;return[1===n.is_valid?e("v-chip",{attrs:{color:"green","text-color":"white",small:""}},[t._v(" Correcto ")]):e("v-chip",{attrs:{color:"red","text-color":"white",small:""}},[t._v(" Incorrecto ")])]}},{key:"item.actions",fn:function(a){var n=a.item;return[e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.attrs,s=a.on;return[e("v-btn",t._g(t._b({attrs:{text:""}},"v-btn",n,!1),s),[t._v(" Acciones ")])]}}],null,!0)},[e("v-list",[e("v-list-item",{attrs:{link:""},on:{click:function(a){return t.detalle(n)}}},[t._v(" Ver detalle ")]),e("v-list-item",{attrs:{link:""},on:{click:function(a){return t.openNewContact(n)}}},[t._v(" Modificar ")]),[e("div",{staticClass:"text-center"},[e("v-dialog",{attrs:{persistent:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[e("v-list-item",t._g(t._b({attrs:{link:""}},"v-list-item",s,!1),n),[t._v(" Eliminar ")])]}}],null,!0),model:{value:t.dialogConfirm,callback:function(a){t.dialogConfirm=a},expression:"dialogConfirm"}},[e("v-card",[e("v-card-title",{staticClass:"text-h5"},[t._v(" Seguro de eliminar este contacto? ")]),e("v-card-text",[t._v("Una vez eliminado este contacto, no podrá recuperarla. Las campañas que se esten procesando y que hagan uso de esta agenda se enviarán con normalidad.")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(a){t.dialogConfirm=!1}}},[t._v(" Cancelar ")]),e("v-btn",{attrs:{color:"success",text:""},on:{click:function(a){return t.deleteItem(n)}}},[t._v(" Confirmo ")])],1)],1)],1)],1)]],2)],1)]}}],null,!0),model:{value:t.selectedUsers,callback:function(a){t.selectedUsers=a},expression:"selectedUsers"}}),e("v-card-actions",[e("v-row",{attrs:{justify:"center"}},[e("v-col",{staticClass:"my-0 py-0",attrs:{cols:"10"}},[e("v-container",{staticClass:"max-width"},[e("v-pagination",{attrs:{length:t.pagination.total},on:{input:t.onPageChange},model:{value:t.pagination.current,callback:function(a){t.$set(t.pagination,"current",a)},expression:"pagination.current"}})],1)],1)],1)],1)],1),e("new-contact",{ref:"newContact",attrs:{"agenda-id":t.$route.params.agendaId},on:{onCreated:t.onCreated}}),e("new-contacts-from-excel",{ref:"newContactsFromExcel"})],1)},s=[],i=(e("159b"),e("43f0")),o=e("9afe"),c=e("88f5"),r=e("5f1f"),l={components:{MoveAgenda:r["a"],newContact:i["a"],newContactsFromExcel:o["a"]},data:function(){return{pagination:{current:1,total:10},searchText:"",duplicateAcept:!1,searchTable:"",isLoading:!1,config:!1,dialogConfirm:!1,agenda:"",lengthPagination:0,itemSelected:"",drawer:null,contacts:[],contact:{number:null,name1:"",name2:"",lastname1:"",lastname2:"",email:"",var1:"",var2:"",var3:"",var4:""},selectedUsers:[],headers:[{text:"Número",value:"number"},{text:"Nombre1",value:"name1"},{text:"Estado",value:"is_valid"},{text:"Ult. Modif.",value:"updated"},{text:"Acciones",value:"actions"}]}},computed:{countContacs:function(){return this.contacts.length},computedSelectedUsers:function(){return[1,2]}},watch:{selectedUsers:function(t){}},mounted:function(){this.agenda=this.$route.params.agenda,this.getContacts()},methods:{onPageChange:function(){this.getContacts()},getContacts:function(){var t=this;this.isLoading=!0,this.selectedUsers=[];var a={searchtext:this.searchText,page:""===this.searchText?this.pagination.current:1};c["a"].get("/contactByAgenda/"+this.$route.params.agendaId,{params:a}).then((function(a){a.data.success?(t.contacts=a.data.data.data,t.pagination.current=a.data.data.current_page,t.pagination.total=a.data.data.last_page):t.$store.dispatch("app/showToast",a.data.message),t.isLoading=!1})).catch((function(t){console.log(t)}))},selectContact:function(t){this.contact=t},openNewContact:function(t){this.$refs.newContact.open(t)},openNewContactsFromExcel:function(){this.$refs.newContactsFromExcel.open()},confirmDelete:function(t){this.deleteItem(t)},deleteItem:function(t){var a=this;c["a"].delete("/contact/"+t.id).then((function(t){t.data.success?(a.$store.dispatch("app/showToast","Contacto eliminado exitosamente"),a.dialogConfirm=!1,a.getContacts()):a.$store.dispatch("app/showToast",t.data.message)}))},deleteItems:function(){var t=this,a=[];this.selectedUsers.forEach((function(t){a.push(t.id)}));var e={contacts_id:a};c["a"].delete("/agenda/"+this.$route.params.agendaId+"/contacts",{data:e}).then((function(a){a.data.success&&(t.$store.dispatch("app/showToast",a.data.message),t.getContacts())}))},onMoveAgenda:function(t){var a=this,e=[];this.selectedUsers.forEach((function(t){e.push(t.id)}));var n={agenda_id:t,contacts_id:e};c["a"].post("/move/contact",n).then((function(t){t.data.success&&(a.$store.dispatch("app/showToast",t.data.message),a.getContacts())}))},moveItems:function(){this.$refs.moveAgenda.open()},onCreated:function(){this.getContacts()}}},d=l,u=e("2877"),v=e("6544"),m=e.n(v),f=e("8212"),g=e("8336"),p=e("b0af"),h=e("99d9"),C=e("cc20"),b=e("62ad"),w=e("a523"),_=e("8fea"),x=e("169a"),k=e("ce7e"),V=e("132d"),y=e("8860"),A=e("da13"),$=e("5d23"),I=e("e449"),T=e("f774"),E=e("891e"),L=e("0fd9"),N=e("2fa4"),S=e("b73d"),D=e("8654"),U=Object(u["a"])(d,n,s,!1,null,null,null);a["default"]=U.exports;m()(U,{VAvatar:f["a"],VBtn:g["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VChip:C["a"],VCol:b["a"],VContainer:w["a"],VDataTable:_["a"],VDialog:x["a"],VDivider:k["a"],VIcon:V["a"],VList:y["a"],VListItem:A["a"],VListItemContent:$["b"],VListItemTitle:$["d"],VMenu:I["a"],VNavigationDrawer:T["a"],VPagination:E["a"],VRow:L["a"],VSpacer:N["a"],VSwitch:S["a"],VTextField:D["a"]})},b842:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex flex-row flex-grow-1 mt-2"},[e("v-navigation-drawer",{staticClass:"elevation-1 rounded flex-shrink-0",class:[t.$vuetify.rtl?"ml-3":"mr-3"],attrs:{app:t.$vuetify.breakpoint.mdAndDown,permanent:t.$vuetify.breakpoint.lgAndUp,floating:"",right:t.$vuetify.rtl,width:"240"},model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[e("v-list",{staticClass:"mt-2 pa-0",attrs:{dense:"",nav:""}},[e("div",{staticClass:"mx-2 mb-2"},[e("v-btn",{attrs:{outlined:"",block:""},on:{click:function(a){t.showCreateDialog=!0}}},[e("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v(" Crear agenda ")],1)],1),t._l(t.agendas,(function(a,n){return e("v-list-item",{key:n,attrs:{to:"/tools/agendas/"+a.id,"active-class":"primary--text",link:""},model:{value:t.agendaSelected,callback:function(a){t.agendaSelected=a},expression:"agendaSelected"}},[e("v-list-item-icon",[e("v-icon",{attrs:{small:""}},[t._v("mdi-book-open-blank-variant")])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.name))])],1),a.all_contacts>0?e("v-list-item-action",[e("v-badge",{staticClass:"font-weight-bold",attrs:{inline:"",color:"primary",content:a.all_contacts}})],1):t._e()],1)}))],2)],1),e("div",{staticClass:"d-flex flex-grow-1 flex-column"},[e("v-toolbar",{staticClass:"hidden-lg-and-up flex-grow-0 mb-2"},[e("v-app-bar-nav-icon",{on:{click:function(a){t.drawer=!t.drawer}}}),e("div",{staticClass:"title font-weight-bold"},[t._v("Agendas")])],1),e("ContactsComponent",{key:t.$route.params.agendaId,attrs:{agendaId:t.$route.params.agendaId}})],1),e("new-agenda",{ref:"newAgenda",on:{onCreated:t.onCreated}})],1)},s=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-dialog",{attrs:{width:"600"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-form",{ref:"formNewAgenda",attrs:{"lazy-validation":""},on:{submit:function(a){return a.preventDefault(),t.save()}}},[e("v-card-title",{staticClass:"pa-2"},[t._v(" "+t._s(t.isEdit?"Modificar agenda":"Crear agenda")+" "),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){t.dialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-divider"),e("div",[e("v-text-field",{staticClass:"px-2 py-1",attrs:{solo:"",flat:"",placeholder:"Nombre","error-messages":t.isValidName,autofocus:"",required:""},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),e("v-divider")],1),e("v-divider"),e("v-card-actions",{staticClass:"pa-2"},[e("v-btn",{attrs:{outlined:""},on:{click:t.close}},[t._v("Cancelar")]),e("v-spacer"),e("v-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Guardar")])],1)],1)],1)],1)},o=[],c=(e("b0c0"),e("88f5")),r={data:function(){return{backendErrors:{name:""},dialog:!1,name:"",agenda:null}},computed:{isEdit:function(){return void 0!==this.agenda},isValidName:function(){return void 0===this.backendErrors.name?"":this.backendErrors.name}},methods:{open:function(t){this.agenda=t,this.isEdit?this.name=t.name:this.name="",this.dialog=!0},close:function(){this.dialog=!1},save:function(){var t=this;if(this.$refs.formNewAgenda.validate())if(this.isEdit){var a={name:this.name};c["a"].put("/agenda/"+this.agenda.id,a).then((function(a){a.data.success&&(t.$store.dispatch("app/showToast","Agenda actualizada exitosamente"),t.$emit("onCreated"),t.close())})).catch((function(a){t.backendErrors=a.response.data.errors}))}else{var e={name:this.name};c["a"].post("/agenda",e,{headers:{Authorization:"Bearer "+window.localStorage.token}}).then((function(a){a.data.success&&(t.$store.dispatch("app/showToast","Agenda creada exitosamente"),t.$emit("onCreated"),t.close())})).catch((function(a){t.backendErrors=a.response.data.errors}))}}}},l=r,d=e("2877"),u=e("6544"),v=e.n(u),m=e("8336"),f=e("b0af"),g=e("99d9"),p=e("169a"),h=e("ce7e"),C=e("4bd4"),b=e("132d"),w=e("2fa4"),_=e("8654"),x=Object(d["a"])(l,i,o,!1,null,null,null),k=x.exports;v()(x,{VBtn:m["a"],VCard:f["a"],VCardActions:g["a"],VCardTitle:g["d"],VDialog:p["a"],VDivider:h["a"],VForm:C["a"],VIcon:b["a"],VSpacer:w["a"],VTextField:_["a"]});var V=e("7bac"),y={components:{newAgenda:k,ContactsComponent:V["default"]},data:function(){return{agendas:[],agendaSelected:1,drawer:null,dialogConfirm:!1,isLoading:!1}},computed:{itemsEmpty:function(){return 0===this.items.length}},mounted:function(){this.getAgendas()},methods:{getAgendas:function(){var t=this;this.isLoading=!1,c["a"].get("/agenda").then((function(a){t.isLoading=!1,a.data.success?t.agendas=a.data.data:t.$store.dispatch("app/showToast",a.data.message)})).catch((function(t){console.log(t)}))},openNewAgenda:function(t){this.$refs.newAgenda.open(t)},confirmDelete:function(t){this.deleteItem(t)},deleteItem:function(t){var a=this;c["a"].delete("/agenda/"+t.id).then((function(t){t.data.success?(a.$store.dispatch("app/showToast","Agenda eliminada exitosamente"),a.dialogConfirm=!1,a.getAgendas()):a.$store.dispatch("app/showToast",t.data.message)}))},manage:function(t){this.$router.push({path:"/tools/agendas/"+t.id+"/contacts",params:{agenda:t}})},onCreated:function(){this.getAgendas()}}},A=y,$=e("5bc1"),I=e("4ca6"),T=e("8860"),E=e("da13"),L=e("1800"),N=e("5d23"),S=e("34c3"),D=e("f774"),U=e("71d9"),M=Object(d["a"])(A,n,s,!1,null,null,null);a["default"]=M.exports;v()(M,{VAppBarNavIcon:$["a"],VBadge:I["a"],VBtn:m["a"],VIcon:b["a"],VList:T["a"],VListItem:E["a"],VListItemAction:L["a"],VListItemContent:N["b"],VListItemIcon:S["a"],VListItemTitle:N["d"],VNavigationDrawer:D["a"],VToolbar:U["a"]})}}]);