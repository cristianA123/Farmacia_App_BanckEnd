(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-330c279b"],{b842:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-row flex-grow-1 mt-2"},[a("v-navigation-drawer",{staticClass:"elevation-1 rounded flex-shrink-0",class:[t.$vuetify.rtl?"ml-3":"mr-3"],attrs:{app:t.$vuetify.breakpoint.mdAndDown,permanent:t.$vuetify.breakpoint.lgAndUp,floating:"",right:t.$vuetify.rtl,width:"240"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{staticClass:"mt-2 pa-0",attrs:{dense:"",nav:""}},[a("div",{staticClass:"mx-2 mb-2"},[a("v-btn",{attrs:{outlined:"",block:""},on:{click:function(e){return t.openNewAgenda()}}},[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v(" Crear agenda ")],1)],1),t._l(t.agendas,(function(e,n){return a("v-list-item",{key:n,attrs:{to:"/tools/agendas/"+e.id,"active-class":"primary--text",link:""},model:{value:t.agendaSelected,callback:function(e){t.agendaSelected=e},expression:"agendaSelected"}},[a("v-list-item-icon",[a("v-icon",{attrs:{small:""}},[t._v("mdi-book-open-blank-variant")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.name))])],1),e.all_contacts>0?a("v-list-item-action",[a("v-badge",{staticClass:"font-weight-bold",attrs:{inline:"",color:"primary",content:e.all_contacts}})],1):t._e()],1)}))],2)],1),a("div",{staticClass:"d-flex flex-grow-1 flex-column"},[a("v-toolbar",{staticClass:"hidden-lg-and-up flex-grow-0 mb-2"},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("div",{staticClass:"title font-weight-bold"},[t._v("Agendas")])],1),a("ContactsComponent",{key:t.$route.params.agendaId,attrs:{"agenda-id":t.$route.params.agendaId},on:{onCreatedContact:t.refreshData}})],1),a("new-agenda",{ref:"newAgenda",on:{onCreatedAgenda:t.onCreatedAgenda}})],1)},s=[],o=a("1da1"),i=(a("96cf"),a("d40f")),c=a("88f5"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("v-navigation-drawer",{attrs:{fixed:"",right:"","hide-overlay":"",temporary:"",width:"310"},model:{value:t.config,callback:function(e){t.config=e},expression:"config"}},[a("div",{staticClass:"d-flex align-center pa-2"},[a("div",{staticClass:"title"},[t._v("Configuraciones")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.config=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("div",{staticClass:"pa-2"},[a("div",{staticClass:"font-weight-bold my-1"},[t._v("Duplicados")]),a("span",[t._v("Permite agregar contactos duplicados")]),a("br"),a("br"),a("v-switch",{attrs:{inset:"",label:"Aceptar contactos duplicados"},model:{value:t.duplicateAcept,callback:function(e){t.duplicateAcept=e},expression:"duplicateAcept"}})],1),a("div",{staticClass:"pa-2"},[a("div",{staticClass:"font-weight-bold my-1"},[t._v("Depurar base")]),a("span",[t._v("Elimina todos los números Incorrecto de esta Base de contactos")]),a("br"),a("br"),a("v-col",{staticClass:"pa-0 ma-0"},[a("v-btn",{staticClass:"col-lg-12",attrs:{mandatory:""}},[t._v(" Limpiar ")])],1)],1)],1),a("Move-Agenda",{ref:"moveAgenda",on:{onMoveAgenda:t.onMoveAgenda}}),a("v-card",[a("v-data-table",{attrs:{headers:t.headers,"show-select":"",loading:t.isLoading,items:t.contacts,"items-per-page":10,search:t.searchTable,"hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:10000",value:t.getContacts,expression:"getContacts",arg:"10000"}],staticClass:"pa-2",attrs:{"append-icon":"mdi-magnify",solo:"",placeholder:"Ej.: Filtrar por numero, nombre1, nombre2,  email, apellido1, apellido2 etc",outlined:""},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})]},proxy:!0},{key:"top",fn:function(){return[a("v-col",{staticClass:"pb-1"},[a("v-row",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.selectedUsers.length>0,expression:"selectedUsers.length > 0"}],staticClass:"ml-3"},n),[t._v(" Acciones "),a("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:t.deleteItems}},[a("v-list-item-title",[t._v("Eliminar seleccionados")])],1),a("v-list-item",{on:{click:t.moveItems}},[a("v-list-item-title",[t._v("Mover a otra agenda")])],1)],1)],1),a("v-spacer"),a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mr-3",attrs:{color:"primary"}},n),[a("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Nuevos contactos ")],1)]}}])},[a("v-list",{attrs:{dense:"",nav:""}},[a("v-list-item",{on:{click:function(e){return t.openNewContact()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Individual")])],1)],1),a("v-list-item",{on:{click:function(e){return t.openNewContactsFromExcel()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Desde Excel")])],1)],1)],1)],1)],1)],1),a("v-col",{staticClass:"pt-1"},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:1000",value:t.getContacts,expression:"getContacts",arg:"1000"}],attrs:{solo:"",placeholder:"Ej.: Filtrar por numero, nombre1, nombre2,  email, apellido1, apellido2 etc",outlined:""},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)]},proxy:!0},{key:"item.id",fn:function(e){var n=e.item;return[a("div",{staticClass:"font-weight-bold"},[t._v("# "),a("copy-label",{attrs:{text:n.id+""}})],1)]}},{key:"item.name1",fn:function(e){var n=e.item;return[a("v-avatar",{attrs:{size:"40"}},[a("v-icon",[t._v(" mdi-account-circle ")])],1),t._v(" "+t._s(n.name1)+" ")]}},{key:"item.is_valid",fn:function(e){var n=e.item;return[1===n.is_valid?a("v-chip",{attrs:{color:"green","text-color":"white",small:""}},[t._v(" Correcto ")]):a("v-chip",{attrs:{color:"red","text-color":"white",small:""}},[t._v(" Incorrecto ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.attrs,s=e.on;return[a("v-btn",t._g(t._b({attrs:{text:""}},"v-btn",n,!1),s),[t._v(" Acciones ")])]}}],null,!0)},[a("v-list",[a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.detalle(n)}}},[t._v(" Ver detalle ")]),a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.openNewContact(n)}}},[t._v(" Modificar ")]),[a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{persistent:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-list-item",t._g(t._b({attrs:{link:""}},"v-list-item",s,!1),n),[t._v(" Eliminar ")])]}}],null,!0),model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v(" Seguro de eliminar este contacto? ")]),a("v-card-text",[t._v("Una vez eliminado este contacto, no podrá recuperarla. Las campañas que se esten procesando y que hagan uso de esta agenda se enviarán con normalidad.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.dialogConfirm=!1}}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"success",text:""},on:{click:function(e){return t.deleteItem(n)}}},[t._v(" Confirmo ")])],1)],1)],1)],1)]],2)],1)]}}],null,!0),model:{value:t.selectedUsers,callback:function(e){t.selectedUsers=e},expression:"selectedUsers"}}),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"my-0 py-0",attrs:{cols:"10"}},[a("v-container",{staticClass:"max-width"},[a("v-pagination",{attrs:{length:t.pagination.total},on:{input:t.onPageChange},model:{value:t.pagination.current,callback:function(e){t.$set(t.pagination,"current",e)},expression:"pagination.current"}})],1)],1)],1)],1)],1),a("new-contact",{ref:"newContact",attrs:{"agenda-id":t.$route.params.agendaId},on:{onCreated:t.onCreated}}),a("new-contacts-from-excel",{ref:"newContactsFromExcel"})],1)},l=[],d=(a("159b"),a("43f0")),u=a("9afe"),v=a("5f1f"),m={components:{MoveAgenda:v["a"],newContact:d["a"],newContactsFromExcel:u["a"]},data:function(){return{pagination:{current:1,total:10},searchText:"",duplicateAcept:!1,searchTable:"",isLoading:!1,config:!1,dialogConfirm:!1,agenda:"",lengthPagination:0,itemSelected:"",drawer:null,contacts:[],contact:{number:null,name1:"",name2:"",lastname1:"",lastname2:"",email:"",var1:"",var2:"",var3:"",var4:""},selectedUsers:[],headers:[{text:"Número",value:"number"},{text:"Nombre1",value:"name1"},{text:"Estado",value:"is_valid"},{text:"Ult. Modif.",value:"updated"},{text:"Acciones",value:"actions"}]}},computed:{countContacs:function(){return this.contacts.length},computedSelectedUsers:function(){return[1,2]}},watch:{selectedUsers:function(t){}},mounted:function(){this.agenda=this.$route.params.agenda,this.getContacts()},methods:{onPageChange:function(){this.getContacts()},getContacts:function(){var t=this;this.isLoading=!0,this.selectedUsers=[];var e={searchtext:this.searchText,page:""===this.searchText?this.pagination.current:1};c["a"].get("/contactByAgenda/"+this.$route.params.agendaId,{params:e}).then((function(e){e.data.success?(t.contacts=e.data.data.data,t.pagination.current=e.data.data.current_page,t.pagination.total=e.data.data.last_page):t.$store.dispatch("app/showToast",e.data.message),t.isLoading=!1})).catch((function(t){console.log(t)}))},selectContact:function(t){this.contact=t},openNewContact:function(t){this.$refs.newContact.open(t)},openNewContactsFromExcel:function(){this.$refs.newContactsFromExcel.open()},confirmDelete:function(t){this.deleteItem(t)},deleteItem:function(t){var e=this;c["a"].delete("/contact/"+t.id).then((function(t){t.data.success?(e.$store.dispatch("app/showToast","Contacto eliminado exitosamente"),e.dialogConfirm=!1,e.getContacts()):e.$store.dispatch("app/showToast",t.data.message)}))},deleteItems:function(){var t=this,e=[];this.selectedUsers.forEach((function(t){e.push(t.id)}));var a={contacts_id:e};c["a"].delete("/agenda/"+this.$route.params.agendaId+"/contacts",{data:a}).then((function(e){e.data.success&&(t.$store.dispatch("app/showToast",e.data.message),t.getContacts())}))},onMoveAgenda:function(t){var e=this,a=[];this.selectedUsers.forEach((function(t){a.push(t.id)}));var n={agenda_id:t,contacts_id:a};c["a"].post("/move/contact",n).then((function(t){t.data.success&&(e.$store.dispatch("app/showToast",t.data.message),e.getContacts())}))},moveItems:function(){this.$refs.moveAgenda.open()},onCreated:function(){this.getContacts(),this.$emit("onCreatedContact")}}},f=m,p=a("2877"),g=a("6544"),h=a.n(g),C=a("8212"),b=a("8336"),w=a("b0af"),x=a("99d9"),_=a("cc20"),k=a("62ad"),V=a("a523"),A=a("8fea"),y=a("169a"),$=a("ce7e"),I=a("132d"),T=a("8860"),E=a("da13"),N=a("5d23"),L=a("e449"),D=a("f774"),S=a("891e"),U=a("0fd9"),F=a("2fa4"),M=a("b73d"),B=a("8654"),j=Object(p["a"])(f,r,l,!1,null,null,null),z=j.exports;h()(j,{VAvatar:C["a"],VBtn:b["a"],VCard:w["a"],VCardActions:x["a"],VCardText:x["c"],VCardTitle:x["d"],VChip:_["a"],VCol:k["a"],VContainer:V["a"],VDataTable:A["a"],VDialog:y["a"],VDivider:$["a"],VIcon:I["a"],VList:T["a"],VListItem:E["a"],VListItemContent:N["b"],VListItemTitle:N["d"],VMenu:L["a"],VNavigationDrawer:D["a"],VPagination:S["a"],VRow:U["a"],VSpacer:F["a"],VSwitch:M["a"],VTextField:B["a"]});var P={components:{newAgenda:i["a"],ContactsComponent:z},data:function(){return{agendas:[],agendaSelected:1,drawer:null,dialogConfirm:!1,isLoading:!1}},computed:{itemsEmpty:function(){return 0===this.agendas.length}},mounted:function(){this.getAgendas()},methods:{getAgendas:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!1,e.next=3,c["a"].get("/agenda");case 3:a=e.sent,a.data.success?t.agendas=a.data.data:t.$store.dispatch("app/showToast",a.data.message);case 5:case"end":return e.stop()}}),e)})))()},openNewAgenda:function(t){this.$refs.newAgenda.open(t)},confirmDelete:function(t){this.deleteItem(t)},deleteItem:function(t){var e=this;c["a"].delete("/agenda/"+t.id).then((function(t){t.data.success?(e.$store.dispatch("app/showToast","Agenda eliminada exitosamente"),e.dialogConfirm=!1,e.getAgendas()):e.$store.dispatch("app/showToast",t.data.message)}))},manage:function(t){this.$router.push({path:"/tools/agendas/"+t.id+"/contacts",params:{agenda:t}})},refreshData:function(){this.getAgendas()},onCreatedAgenda:function(){this.getAgendas()}}},O=P,q=a("5bc1"),R=a("4ca6"),J=a("1800"),G=a("34c3"),H=a("71d9"),K=Object(p["a"])(O,n,s,!1,null,null,null);e["default"]=K.exports;h()(K,{VAppBarNavIcon:q["a"],VBadge:R["a"],VBtn:b["a"],VIcon:I["a"],VList:T["a"],VListItem:E["a"],VListItemAction:J["a"],VListItemContent:N["b"],VListItemIcon:G["a"],VListItemTitle:N["d"],VNavigationDrawer:D["a"],VToolbar:H["a"]})},d40f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-form",{ref:"formNewAgenda",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.save()}}},[a("v-card-title",{staticClass:"pa-2"},[t._v(" "+t._s(t.isEdit?"Modificar agenda":"Crear agenda")+" "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("div",[a("v-text-field",{staticClass:"px-2 py-1",attrs:{solo:"",flat:"",placeholder:"Nombre","error-messages":t.isValidName,autofocus:"",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-divider")],1),a("v-divider"),a("v-card-actions",{staticClass:"pa-2"},[a("v-btn",{attrs:{outlined:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Guardar")])],1)],1)],1)],1)},s=[],o=(a("b0c0"),a("88f5")),i={data:function(){return{backendErrors:{name:""},dialog:!1,name:"",agenda:null}},computed:{isEdit:function(){return void 0!==this.agenda},isValidName:function(){return void 0===this.backendErrors.name?"":this.backendErrors.name}},methods:{open:function(t){this.agenda=t,this.isEdit?this.name=t.name:this.name="",this.dialog=!0},close:function(){this.dialog=!1},save:function(){var t=this;if(this.$refs.formNewAgenda.validate())if(this.isEdit){var e={name:this.name};o["a"].put("/agenda/"+this.agenda.id,e).then((function(e){e.data.success&&(t.$store.dispatch("app/showToast","Agenda actualizada exitosamente"),t.$emit("onCreatedAgenda"),t.close())})).catch((function(e){t.backendErrors=e.response.data.errors}))}else{var a={name:this.name};o["a"].post("/agenda",a,{headers:{Authorization:"Bearer "+window.localStorage.token}}).then((function(e){e.data.success&&(t.$store.dispatch("app/showToast","Agenda creada exitosamente"),t.$emit("onCreatedAgenda"),t.close())})).catch((function(e){t.backendErrors=e.response.data.errors}))}}}},c=i,r=a("2877"),l=a("6544"),d=a.n(l),u=a("8336"),v=a("b0af"),m=a("99d9"),f=a("169a"),p=a("ce7e"),g=a("4bd4"),h=a("132d"),C=a("2fa4"),b=a("8654"),w=Object(r["a"])(c,n,s,!1,null,null,null);e["a"]=w.exports;d()(w,{VBtn:u["a"],VCard:v["a"],VCardActions:m["a"],VCardTitle:m["d"],VDialog:f["a"],VDivider:p["a"],VForm:g["a"],VIcon:h["a"],VSpacer:C["a"],VTextField:b["a"]})}}]);