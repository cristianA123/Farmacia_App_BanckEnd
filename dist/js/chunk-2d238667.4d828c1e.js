(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d238667"],{fee7:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("div",{staticClass:"d-flex align-center py-3"},[t._m(0),a("v-spacer"),a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{color:"primary"}},n),[a("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Nuevos contactos ")],1)]}}])},[a("v-list",{attrs:{dense:"",nav:""}},[a("v-list-item",{on:{click:function(e){return t.openNewContact()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Individual")])],1)],1),a("v-list-item",{on:{click:function(e){return t.openNewContactsFromExcel()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Desde Excel")])],1)],1)],1)],1),a("v-btn",{staticClass:"ml-2",on:{click:function(e){t.config=!0}}},[a("v-icon",[t._v("mdi-cog-outline")])],1)],1),a("v-navigation-drawer",{attrs:{fixed:"",right:"","hide-overlay":"",temporary:"",width:"310"},model:{value:t.config,callback:function(e){t.config=e},expression:"config"}},[a("div",{staticClass:"d-flex align-center pa-2"},[a("div",{staticClass:"title"},[t._v("Configuraciones")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.config=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("div",{staticClass:"pa-2"},[a("div",{staticClass:"font-weight-bold my-1"},[t._v("Duplicados")]),a("span",[t._v("Permite agregar contactos duplicados")]),a("br"),a("br"),a("v-switch",{attrs:{inset:"",label:"Aceptar contactos duplicados"},model:{value:t.duplicateAcept,callback:function(e){t.duplicateAcept=e},expression:"duplicateAcept"}})],1),a("div",{staticClass:"pa-2"},[a("div",{staticClass:"font-weight-bold my-1"},[t._v("Depurar base")]),a("span",[t._v("Elimina todos los números Incorrecto de esta Base de contactos")]),a("br"),a("br"),a("v-col",{staticClass:"pa-0 ma-0"},[a("v-btn",{staticClass:"col-lg-12",attrs:{mandatory:""}},[t._v(" Limpiar ")])],1)],1)],1),a("Move-Agenda",{ref:"moveAgenda",on:{onMoveAgenda:t.onMoveAgenda}}),a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,"show-select":"",loading:t.isLoading,items:t.contacts,"items-per-page":10,search:t.searchTable,"hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-row",[a("v-col",{staticClass:"py-0"},[a("div",{staticClass:"pa-2"},[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.selectedUsers.length>0,expression:"selectedUsers.length > 0"}]},n),[t._v(" Acciones "),a("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:t.deleteItems}},[a("v-list-item-title",[t._v("Eliminar seleccionados")])],1),a("v-list-item",{on:{click:t.moveItems}},[a("v-list-item-title",[t._v("Mover a otra agenda")])],1)],1)],1)],1)]),a("v-col",{staticClass:"pb-0 pr-6"},[a("v-text-field",{attrs:{label:"Buscar contacto",outlined:""},model:{value:t.searchTable,callback:function(e){t.searchTable=e},expression:"searchTable"}})],1)],1)]},proxy:!0},{key:"item.id",fn:function(e){var n=e.item;return[a("div",{staticClass:"font-weight-bold"},[t._v("# "),a("copy-label",{attrs:{text:n.id+""}})],1)]}},{key:"item.name1",fn:function(e){var n=e.item;return[a("v-avatar",{attrs:{size:"40"}},[a("v-icon",[t._v(" mdi-account-circle ")])],1),t._v(" "+t._s(n.name1)+" ")]}},{key:"item.is_valid",fn:function(e){var n=e.item;return[1===n.is_valid?a("v-chip",{attrs:{color:"green","text-color":"white",small:""}},[t._v(" Correcto ")]):a("v-chip",{attrs:{color:"red","text-color":"white",small:""}},[t._v(" Incorrecto ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.attrs,s=e.on;return[a("v-btn",t._g(t._b({attrs:{text:""}},"v-btn",n,!1),s),[t._v(" Acciones ")])]}}],null,!0)},[a("v-list",[a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.detalle(n)}}},[t._v(" Ver detalle ")]),a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.openNewContact(n)}}},[t._v(" Modificar ")]),[a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{persistent:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-list-item",t._g(t._b({attrs:{link:""}},"v-list-item",s,!1),n),[t._v(" Eliminar ")])]}}],null,!0),model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v(" Seguro de eliminar este contacto? ")]),a("v-card-text",[t._v("Una vez eliminado este contacto, no podrá recuperarla. Las campañas que se esten procesando y que hagan uso de esta agenda se enviarán con normalidad.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.dialogConfirm=!1}}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"success",text:""},on:{click:function(e){return t.deleteItem(n)}}},[t._v(" Confirmo ")])],1)],1)],1)],1)]],2)],1)]}}],null,!0),model:{value:t.selectedUsers,callback:function(e){t.selectedUsers=e},expression:"selectedUsers"}}),a("v-card-actions",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"my-0 py-0",attrs:{cols:"10"}},[a("v-container",{staticClass:"max-width"},[a("v-pagination",{attrs:{length:t.pagination.total},on:{input:t.onPageChange},model:{value:t.pagination.current,callback:function(e){t.$set(t.pagination,"current",e)},expression:"pagination.current"}})],1)],1)],1)],1)],1),a("new-contact",{ref:"newContact",attrs:{"agenda-id":t.$route.params.agendaId},on:{onCreated:t.onCreated}}),a("new-contacts-from-excel",{ref:"newContactsFromExcel"})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"display-1"},[t._v("Contactos")])])}],o=(a("159b"),a("43f0")),i=a("9afe"),c=a("88f5"),r=a("5f1f"),l={components:{MoveAgenda:r["a"],newContact:o["a"],newContactsFromExcel:i["a"]},data:function(){return{pagination:{current:1,total:10},searchText:"",duplicateAcept:!1,searchTable:"",isLoading:!1,config:!1,dialogConfirm:!1,agenda:"",lengthPagination:0,itemSelected:"",drawer:null,contacts:[],contact:{number:null,name1:"",name2:"",lastname1:"",lastname2:"",email:"",var1:"",var2:"",var3:"",var4:""},selectedUsers:[],headers:[{text:"Número",value:"number"},{text:"Nombre1",value:"name1"},{text:"Estado",value:"is_valid"},{text:"Ult. Modif.",value:"updated"},{text:"Acciones",value:"actions"}]}},computed:{countContacs:function(){return this.contacts.length},computedSelectedUsers:function(){return[1,2]}},watch:{selectedUsers:function(t){}},mounted:function(){this.agenda=this.$route.params.agenda,this.getContacts()},methods:{onPageChange:function(){this.getContacts()},getContacts:function(){var t=this;this.isLoading=!0,this.selectedUsers=[];var e={searchtext:this.searchText,page:""===this.searchText?this.pagination.current:1};c["a"].get("/contactByAgenda/"+this.$route.params.agendaId,{params:e}).then((function(e){e.data.success?(t.contacts=e.data.data.data,t.pagination.current=e.data.data.current_page,t.pagination.total=e.data.data.last_page):t.$store.dispatch("app/showToast",e.data.message),t.isLoading=!1})).catch((function(t){console.log(t)}))},selectContact:function(t){this.contact=t},openNewContact:function(t){this.$refs.newContact.open(t)},openNewContactsFromExcel:function(){this.$refs.newContactsFromExcel.open()},confirmDelete:function(t){this.deleteItem(t)},deleteItem:function(t){var e=this;c["a"].delete("/contact/"+t.id).then((function(t){t.data.success?(e.$store.dispatch("app/showToast","Contacto eliminado exitosamente"),e.dialogConfirm=!1,e.getContacts()):e.$store.dispatch("app/showToast",t.data.message)}))},deleteItems:function(){var t=this,e=[];this.selectedUsers.forEach((function(t){e.push(t.id)}));var a={contacts_id:e};c["a"].delete("/agenda/"+this.$route.params.agendaId+"/contacts",{data:a}).then((function(e){e.data.success&&(t.$store.dispatch("app/showToast",e.data.message),t.getContacts())}))},onMoveAgenda:function(t){var e=this,a=[];this.selectedUsers.forEach((function(t){a.push(t.id)}));var n={agenda_id:t,contacts_id:a};c["a"].post("/move/contact",n).then((function(t){t.data.success&&(e.$store.dispatch("app/showToast",t.data.message),e.getContacts())}))},moveItems:function(){this.$refs.moveAgenda.open()},onCreated:function(){this.getContacts()}}},d=l,v=a("2877"),u=a("6544"),m=a.n(u),f=a("8212"),p=a("8336"),g=a("b0af"),h=a("99d9"),C=a("cc20"),_=a("62ad"),w=a("a523"),b=a("8fea"),x=a("169a"),k=a("ce7e"),y=a("132d"),V=a("8860"),A=a("da13"),T=a("5d23"),I=a("e449"),$=a("f774"),E=a("891e"),U=a("0fd9"),L=a("2fa4"),N=a("b73d"),S=a("8654"),M=Object(v["a"])(d,n,s,!1,null,null,null);e["default"]=M.exports;m()(M,{VAvatar:f["a"],VBtn:p["a"],VCard:g["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VChip:C["a"],VCol:_["a"],VContainer:w["a"],VDataTable:b["a"],VDialog:x["a"],VDivider:k["a"],VIcon:y["a"],VList:V["a"],VListItem:A["a"],VListItemContent:T["b"],VListItemTitle:T["d"],VMenu:I["a"],VNavigationDrawer:$["a"],VPagination:E["a"],VRow:U["a"],VSpacer:L["a"],VSwitch:N["a"],VTextField:S["a"]})}}]);