(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0ba7":function(t,e,a){"use strict";a("a58e")},"1e94":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-grow-1 flex-column"},[a("div",{staticClass:"d-flex align-center justify-space-between align-content-center mb-1",attrs:{id:"dashBoard",dense:""}},[a("div",{staticClass:"display-1 text-lg-h4 text-md-h4 text-h5"},[t._v("Dashboard")]),a("v-spacer"),a("v-btn",{staticClass:"mx-2",attrs:{depressed:"",outlined:"",color:"primary",small:"",loading:t.loadingSendPdfByEmail},on:{click:t.sendPdfByEmail}},[a("v-icon",[t._v("mdi-share-all-outline")])],1),a("v-btn",{attrs:{outlined:"",color:"primary",small:"",loading:t.loadingDownloadPdf},on:{click:t.downloadPdf}},[a("v-icon",[t._v("mdi-progress-download")])],1),a("BtnToReload")],1),a("v-row",{staticClass:"d-flex justify-space-between align-content-center mb-1",attrs:{id:"dashBoard",dense:""}},[a("InitialCreditComponent",{attrs:{credit:t.credits.credit,"is-loading":t.isLoading}}),a("AvailableCreditComponent",{attrs:{"available-credit":t.credits.availableCredit,credits:t.credits,"is-loading":t.isLoading}}),a("ServiceCreditComponent",{attrs:{credits:t.credits,"is-loading":t.isLoading}})],1)],1)},r=[],o=a("1da1"),n=(a("96cf"),a("b0c0"),a("caad"),a("2532"),a("d3b7"),a("88f5")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-card",{attrs:{color:"#1E1E35",dark:"",height:"270px"}},[a("v-card-title",[t._v(" Crédito inicial ")]),a("v-card-text",[a("v-col",{staticClass:"d-flex justify-center"},[t.isLoading?a("div",[a("v-progress-circular",{attrs:{size:50,indeterminate:""}})],1):a("div",[a("div",{staticClass:"text-h1"},[t._v(" "+t._s(t._f("formatCurrency")(t.credit,t.configFormat))+" ")]),a("div",{staticClass:"d-flex justify-end"},[a("span",[t._v("Créditos")])])])])],1)],1)],1)},d=[],c=(a("a9e3"),{props:{isLoading:{type:Boolean,default:!1},credit:{type:Number,default:0}},computed:{configFormat:function(){return{decimalDigits:0,decimalSeparator:".",thousandsSeparator:",",currencySymbol:"",currencySymbolNumberOfSpaces:0,currencySymbolPosition:"left"}}}}),l=c,u=a("2877"),v=a("6544"),f=a.n(v),g=a("b0af"),m=a("99d9"),p=a("62ad"),h=a("490a"),_=Object(u["a"])(l,s,d,!1,null,null,null),C=_.exports;f()(_,{VCard:g["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:p["a"],VProgressCircular:h["a"]});var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-card",{attrs:{dark:"",height:"270px",color:"#FF7901"},on:{click:t.detailAvailableCredit}},[a("v-card-title",[t._v(" Crédito disponible ")]),a("v-card-text",[a("v-col",{staticClass:"d-flex justify-center"},[t.isLoading?a("div",[a("v-progress-circular",{attrs:{size:50,indeterminate:""}})],1):a("div",[a("div",{staticClass:"text-h1"},[t._v(" "+t._s(t._f("formatCurrency")(t.availableCredit,t.configFormat))+" ")]),a("div",{staticClass:"d-flex justify-end"},[a("span",[t._v("Créditos")])])])])],1)],1),a("v-dialog",{attrs:{width:"300px"},model:{value:t.diaglog,callback:function(e){t.diaglog=e},expression:"diaglog"}},[a("v-card",[a("v-card-title",[t._v("Detalle de créditos")]),a("v-card-text",[a("table",[a("tr",[a("td",{staticStyle:{width:"100%"}},[a("strong",[t._v("Inicial:")])]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("formatCurrency")(t.credits.credit,t.configFormat)))]),a("td",[t._v("-")])]),a("tr",[a("td",{staticStyle:{width:"300px"}},[a("strong",[t._v("Sub-usuarios:")])]),a("td",{staticClass:"link-users",staticStyle:{"text-align":"right"},on:{click:t.showUsers}},[t._v(t._s(t._f("formatCurrency")(t.assignedCredits,t.configFormat)))])]),a("tr",[a("td",{staticStyle:{width:"300px"}},[a("strong",[t._v("Mi usuario:")])]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("formatCurrency")(t.credits.sms_cost+t.credits.ivr_cost,t.configFormat)))])]),a("tr",[a("td"),a("td",[t._v("_________")])]),a("tr",[a("td",{staticStyle:{width:"300px"}},[a("strong",[t._v("Disponible:")])]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("formatCurrency")(t.credits.availableCredit,t.configFormat)))])])])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.diaglog=!1}}},[t._v("Entiendo")])],1)],1)],1)],1)},y=[],x=(a("159b"),{props:{credits:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},availableCredit:{type:Number,default:0}},data:function(){return{diaglog:!1,assignedCredits:0}},computed:{configFormat:function(){return{decimalDigits:0,decimalSeparator:".",thousandsSeparator:",",currencySymbol:"",currencySymbolNumberOfSpaces:0,currencySymbolPosition:"left"}}},mounted:function(){this.getUsers()},methods:{detailAvailableCredit:function(){this.diaglog=!0},getUsers:function(){var t=this;n["a"].get("/user").then((function(e){if(e.data.success){var a=e.data.data;a.forEach((function(e){t.assignedCredits=t.assignedCredits+e.credit}))}}))},showUsers:function(){this.$router.push({name:"users"})}}}),S=x,w=(a("0ba7"),a("8336")),E=a("169a"),D=a("2fa4"),V=Object(u["a"])(S,b,y,!1,null,"5aa3b58e",null),B=V.exports;f()(V,{VBtn:w["a"],VCard:g["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:p["a"],VDialog:E["a"],VProgressCircular:h["a"],VSpacer:D["a"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",lg:"3",xl:"3"}},[a("v-card",{attrs:{height:"200px"}},[a("v-card-title",[t._v(" Crédito "+t._s(t.service)+" consumido ")]),a("v-card-text",[a("v-col",{staticClass:"d-flex justify-center"},[t.isLoading?a("div",[a("v-progress-circular",{attrs:{size:50,indeterminate:""}})],1):a("div",[a("div",{staticClass:"text-h3"},[t._v(" "+t._s(t._f("formatCurrency")(t.credits.sms_cost+t.credits.ivr_cost,t.configFormat))+" ")]),a("div",{staticClass:"d-flex justify-end"},[a("span",[t._v("Créditos")])])])])],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:t.dialogDetailAvailableCredit,callback:function(e){t.dialogDetailAvailableCredit=e},expression:"dialogDetailAvailableCredit"}},[a("v-card",[a("v-card-title",[t._v("Detalle de créditos")]),a("v-card-text",[a("table",[a("tr",[a("td",[t._v("Crédito inicial:")]),a("td",[t._v("sd -")])]),a("tr",[a("td",[t._v("Crédito asignado a sub-usuarios:")]),a("td",[t._v("sd")])]),a("tr",[a("td",[t._v("Crédito utilizado por mi usuario:")]),a("td",[t._v("sd")])]),t._v(" ______________ "),a("tr",[a("td",[t._v("Crédito disponible:")]),a("td",[t._v("sd")])])])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""}},[t._v("Más detalle")]),a("v-btn",{attrs:{text:""}},[t._v("Entiendo")])],1)],1)],1)],1)},k=[],P={props:{service:{type:String,default:function(){return""}},isLoading:{type:Boolean,default:!1},credits:{type:Object,default:function(){}}},data:function(){return{dialogDetailAvailableCredit:!1}},computed:{configFormat:function(){return{decimalDigits:0,decimalSeparator:".",thousandsSeparator:",",currencySymbol:"",currencySymbolNumberOfSpaces:0,currencySymbolPosition:"left"}}}},A=P,F=Object(u["a"])(A,O,k,!1,null,null,null),R=F.exports;f()(F,{VBtn:w["a"],VCard:g["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:p["a"],VDialog:E["a"],VProgressCircular:h["a"],VSpacer:D["a"]});var $=a("ed7b"),j=a("8baf"),L=a("c0e9"),T=a.n(L),U=a("c1df"),I=a.n(U);I.a.locale("es");var M={components:{InitialCreditComponent:C,AvailableCreditComponent:B,ServiceCreditComponent:R,BtnToReload:$["a"]},data:function(){return{isLoading:!1,credits:{credit:0,availableCredit:0},loadingDownloadPdf:!1,loadingSendPdfByEmail:!1}},computed:{theme:function(){return this.$vuetify.theme.isDark?this.$vuetify.theme.defaults.dark:this.$vuetify.theme.defaults.light},configFormat:function(){return{decimalDigits:0,decimalSeparator:".",thousandsSeparator:",",currencySymbol:"",currencySymbolNumberOfSpaces:0,currencySymbolPosition:"left"}}},mounted:function(){this.getCreditsUsedByUser()},methods:{getCreditsUsedByUser:function(){var t=this;this.isLoading=!0,n["a"].get("/creditsUsedByUser").then((function(e){e.data.success&&(t.credits=e.data.data,t.isLoading=!1)}))},downloadPdf:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingDownloadPdf=!0,a={scale:3},e.next=4,T()(document.getElementById("dashBoard"),a).then((function(t){var e=t.toDataURL("image/png"),a=new j["a"]("p","pt","a4"),i=25,r=135,o=a.getImageProperties(e),n=a.internal.pageSize.getWidth()-2*i,s=o.height*n/o.width,d=16;a.setFontSize(d);var c={align:"center",font:"helvetica"};console.log($cookies.get("user").company),a.text("Dashboard",n/2,40,c),a.setFontSize(12),a.text("FECHA Y HORA: "+I()().format("MMMM Do YYYY, h:mm:ss a"),25,65),a.text("DATOS DEL USUARIO:",25,80),a.text("NOMBRE: "+$cookies.get("user").name,25,95),a.text("CORREO: "+$cookies.get("user").email,25,110),a.text("COMPAÑIA: "+$cookies.get("user").company,25,125),a.addImage(e,"JPEG",i,r,n,s,void 0,"FAST"),a.save("Reporte de campaña.pdf")}));case 4:t.loadingDownloadPdf=!1;case 5:case"end":return e.stop()}}),e)})))()},sendPdfByEmail:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingSendPdfByEmail=!0,a={scale:3},e.next=4,T()(document.getElementById("dashBoard"),a).then((function(e){var a=e.toDataURL("image/png"),i=new j["a"]("p","pt","a4"),r=25,o=135,n=i.getImageProperties(a),s=i.internal.pageSize.getWidth()-2*r,d=n.height*s/n.width,c=16;i.setFontSize(c);var l={align:"center",font:"helvetica"};i.text("Dashboard",s/2,40,l),i.setFontSize(11),i.text("FECHA Y HORA: "+I()().format("MMMM Do YYYY, h:mm:ss a"),25,65),i.setFontSize(12),i.text("DATOS DEL USUARIO:",25,80),i.setFontSize(11),i.text("NOMBRE: "+$cookies.get("user").name,25,95),i.text("CORREO: "+$cookies.get("user").email,25,110),i.text("EMPRESA: "+$cookies.get("user").company,25,125),i.addImage(a,"JPEG",r,o,s,d,void 0,"FAST");var u=new FormData;u.append("file",i.output("blob"));var v=window.location.hostname.includes("localhost")?"http://localhost:8000/api/send_email":"http://35.86.152.9:81/api/send_email";fetch(v,{method:"POST",body:u,headers:{Authorization:"Bearer "+$cookies.get("token")}}).then((function(t){return t.json()})).then((function(e){e.success?t.$store.dispatch("app/showToast","Correo enviado"):t.$store.dispatch("app/showToast","Error al enviar correo")})).catch((function(e){t.$store.dispatch("app/showToast","Error al enviar correo")}))}));case 4:t.loadingSendPdfByEmail=!1;case 5:case"end":return e.stop()}}),e)})))()}}},z=M,Y=a("132d"),N=a("0fd9"),H=Object(u["a"])(z,i,r,!1,null,null,null);e["default"]=H.exports;f()(H,{VBtn:w["a"],VIcon:Y["a"],VRow:N["a"],VSpacer:D["a"]})},a58e:function(t,e,a){},ed7b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{staticClass:"ml-2",attrs:{outlined:"",color:"primary",small:""},on:{click:t.reoad}},[a("v-icon",[t._v(" mdi-reload ")])],1)],1)},r=[],o={data:function(){return{loading:!1}},methods:{reoad:function(){window.location.reload()}}},n=o,s=a("2877"),d=a("6544"),c=a.n(d),l=a("8336"),u=a("132d"),v=Object(s["a"])(n,i,r,!1,null,null,null);e["a"]=v.exports;c()(v,{VBtn:l["a"],VIcon:u["a"]})}}]);